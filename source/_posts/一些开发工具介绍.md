---
title: 一些开发工具介绍
urlname: introduction-to-some-development-tools
date: 2018-02-03 14:47:05
category: 工具
tags: tool
photos: /images/badge-style.png
---

在一些项目的 `README` 中，我们会看到上面这种 `徽章（Badge）`，这是如何制作的呢？

<!-- more -->

## Badge

- CI结果
[![AppVeyor](https://img.shields.io/appveyor/ci/liluoao/blog-source.svg?longCache=true&logo=appveyor)](https://ci.appveyor.com/project/liluoao/blog-source)
- 项目许可
[![license](https://img.shields.io/github/license/liluoao/blog-source.svg?longCache=true)](https://github.com/liluoao/blog-source/blob/master/LICENSE)
- 项目版本
[![Packagist](https://img.shields.io/packagist/v/liluoao/phalcon.svg?longCache=true)](https://packagist.org/packages/liluoao/phalcon)
- 包/环境版本要求
[![PHP 版本](https://img.shields.io/packagist/php-v/liluoao/phalcon.svg?longCache=true)](https://packagist.org/packages/liluoao/phalcon)

这些 SVG 图标的来源都是 [Shields.io](https://shields.io/) ，现在各质量检测平台（如 Sonar）也实现了自己的徽章生成

#### 自定义

shields.io 提供了自定义 Badge 的格式：

```
https://img.shields.io/badge/<SUBJECT>-<STATUS>-<COLOR>.svg
```

有 5 种样式的徽章，分别为

- plastic
- flat
- flat-square
- for-the-badge
- social

以参数 `style=xx` 拼接在后面即可，多个中划线、下划线只保留 1 个

## Carbon便捷处理时间

[Carbon](http://carbon.nesbot.com/) 是一个 PHP 的时间处理包，它继承自 `DateTime` 类的 API 扩展，让处理日期和时间更加简单。

使用方式：

```
composer require nesbot/carbon
```

```php
//常规项目
use Carbon\Carbon;
//Laravel项目
use Illuminate\Support\Carbon;
```

后者除了继承于前者，还实现了 `JsonSerializable` interface 和 `Macroable` trait

#### 实例化

```php
Carbon::now();//同Laravel辅助函数now()
Carbon::today();//同Laravel辅助函数today()
Carbon::parse('2018-5-7 14:38:00');
Carbon::create(2018, 5, 1, 0, 0, 0);
Carbon::now()->year(2008)->month(5)->day(21)->hour(22)->minute(32)->second(5);
Carbon::now()->setDate(1975, 5, 21)->setTime(22, 32, 5);
```

#### 字符串输出

```php
$dt = Carbon::create(1975, 12, 25, 14, 15, 16);

echo $dt->toDateString();                          // 1975-12-25
echo $dt->toTimeString();                          // 14:15:16
echo $dt->toDateTimeString();                      // 1975-12-25 14:15:16
echo $dt->toDayDateTimeString();                   // Thu, Dec 25, 1975 2:15 PM
```

#### 比较

常用比较如

- `eq` (equalTo)
- `ne` (notEqualTo)
- `gt` (greaterThan)
- `lt` (lessThan)
- `gte` (greaterThanOrEqualTo)
- `lte` (lessThanOrEqualTo)

这些比较使用的是 `==` ，在 PHP7.1 前忽略毫秒微秒的差别。

其它可用比较方法：

```php
//过去or未来
$dt->isFuture();
$dt->isPast();
//闰年
$dt->isLeapYear();
//季度
$dt->isCurrentQuarter();
//工作日or周末
$dt->isWeekday();
$dt->isWeekend();
//周几
$dt->isWednesday();
$dt->isDayOfWeek(Carbon::SATURDAY);
```

#### 自增自减

可以对世纪、年、季度、月、周、时、分、秒进行 `add()` 加或 `sub()` 减

```php
//世纪
echo $dt->addCentury();
//文档里对加减复数使用复数方法，源码中单数方法也可以接收参数
echo $dt->addCenturies(5);
echo $dt->subCentury();
//工作日
echo $dt->addWeekday();
echo $dt->subWeekday();
```

#### 求差

有时我们会使一件事在一个周期里只允许一次，例如发年终奖，这时我们可以判断 `今天` 和 `上次发年终奖` 对于 `发年终奖日期` 是否在同一年

```php
//今天是第几年发奖
$todayPassYearNum = $canDividendDate->diffInYears(today());
//上次发奖是第几年
$dividendDatePassYearNum = $canDividendDate->diffInYears(Carbon::parse($lastDividendDate));
if ($todayPassYearNum === $dividendDatePassYearNum) {
    throw new Exception(600, '本年已发过奖');
}
```

同理也有 `diffInHours()` `diffInDays()` 等方法

#### 常量

Carbon 提供了许多方便的常量，例如：

```php
var_dump(Carbon::SUNDAY);                          // int(0)
var_dump(Carbon::MONDAY);                          // int(1)
var_dump(Carbon::TUESDAY);                         // int(2)
var_dump(Carbon::WEDNESDAY);                       // int(3)
var_dump(Carbon::THURSDAY);                        // int(4)
var_dump(Carbon::FRIDAY);                          // int(5)
var_dump(Carbon::SATURDAY);                        // int(6)

var_dump(Carbon::YEARS_PER_CENTURY);               // int(100)
var_dump(Carbon::YEARS_PER_DECADE);                // int(10)
var_dump(Carbon::MONTHS_PER_YEAR);                 // int(12)
var_dump(Carbon::WEEKS_PER_YEAR);                  // int(52)
var_dump(Carbon::DAYS_PER_WEEK);                   // int(7)
var_dump(Carbon::HOURS_PER_DAY);                   // int(24)
var_dump(Carbon::MINUTES_PER_HOUR);                // int(60)
var_dump(Carbon::SECONDS_PER_MINUTE);              // int(60)
```

## PHPStorm使用SFTP

在开发时如果需要实时将文件同步到服务器上，可能需要用 Xftp 等软件来实现。这样需要在几个界面来回切换，比较耗时。

其实 IDE 已经为你实现了这个功能，打开 PHPStorm，点击 `Tools—>Deployment—>Cofiguration`

![配置位置](/images/phpstorm-ftp.png)

依次填入项目名称，FTP主机地址，用户名，密码，项目的浏览器访问地址，然后点击 `Test FTP connection` 测试是否连接成功

![输入SFTP配置](/images/ftp-config.png)

完成后就可以像下图所示打开远程列表

![](/images/remote-host.png)