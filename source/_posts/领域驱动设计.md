---
title: é¢†åŸŸé©±åŠ¨è®¾è®¡
date: 2021-10-22 12:40:15
urlname: about-domain-driven-design
category: åˆ†äº«
---

![ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹](https://i.imgtg.com/2022/08/23/K6MjM.png)

<!-- more -->

é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain Driven Designï¼Œç®€ç§° DDDï¼‰æœ€è¿‘ 5 å¹´è¶Šæ¥è¶ŠğŸ”¥ï¼Œå¾ˆå¤šå…¬å¸éƒ½æŠŠå®ƒä½œä¸ºè§£å†³å¤æ‚ä¸šåŠ¡çš„è‰¯è¯ã€‚ç”±äº DDD ä¸æ˜¯ä¸€å¥—æ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ç§æ¶æ„æ€æƒ³ï¼Œæ‰€ä»¥åœ¨ä»£ç å±‚é¢ç¼ºä¹äº†è¶³å¤Ÿçš„çº¦æŸï¼Œå¯¼è‡´ DDD åœ¨å®é™…åº”ç”¨ä¸­ä¸Šæ‰‹é—¨æ§›å¾ˆé«˜ã€‚

å¯¹äºå‰æœŸçš„å‡†å¤‡å·¥ä½œæ¥è¯´ï¼Œä½ éœ€è¦æŠŠå…¬å¸çš„å„ä¸šåŠ¡åŸŸåˆ’åˆ†æ¸…æ¥šï¼Œå¹¶ä¸”çŸ¥é“ä»€ä¹ˆæ˜¯å…¬å¸çš„æ ¸å¿ƒåŸŸã€‚

> åœ¨ä¸Šç¯‡æ–‡ç« æœ«å°¾æœ‰å’±å…¬å¸çš„åˆ’åˆ†ï¼Œæ¶‰åŠæˆ‘çš„å°±æ˜¯ä¾›åº”é“¾ã€é›¶å”®ã€ä¿¡æ¯åŒ–ç­‰åŸŸ

ç½‘ä¸Šå…³äº DDD çš„èµ„æ–™åŸºæœ¬éƒ½æ˜¯ Java æ ˆçš„ï¼Œç¡®å®å¯¹äº PHP è¿™ä¸ªè„šæœ¬è¯­è¨€æ¥è¯´ï¼Œä½ æƒ³æ DDD è¿˜ä¸å¦‚ç›´æ¥æ¢è¯­è¨€å®ç°æ¥çš„å¿«ã€‚ä½†æ˜¯å’±å…¬å¸æŠ€æœ¯ç¡®å® niubilityï¼Œåœ¨è‡ªå·±çš„æ¡†æ¶åŸºç¡€ä¸Šå®ç°äº†ä¸€å¥— DDD çº¦æŸã€‚

Entity é¢†åŸŸå®ä½“ä½œä¸ºæ ¸å¿ƒå†…å®¹ï¼Œæ‹¥æœ‰ç€å”¯ä¸€æ ‡è¯†ï¼ˆä¾‹å¦‚ä¸»é”®çš„å€¼å¯¹è±¡ï¼‰å’Œå¯å˜çš„å†…å®¹ã€‚ç±»ä¼¼äº Laravel ä¸­æ¨¡å‹çš„å…³è”å…³ç³»ï¼Œå’±ä¹Ÿå®ç°äº†å®ä½“çš„å…³è”å…³ç³»ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰æ–¹æ³•æ¥å®ç°å®ä½“é—´ã€å®ä½“ä¸å€¼å¯¹è±¡é—´çš„ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šç­‰ã€‚

> Entity å’Œ VOï¼ˆValue Objectï¼‰çš„åŒºåˆ«åœ¨äºæ˜¯å¦å­˜åœ¨ç”Ÿå‘½å‘¨æœŸã€‚

Persistence æŒä¹…åŒ–å±‚ï¼Œå°±æ˜¯ä¸æ•°æ®åº“äº¤äº’çš„ä½ç½®ã€‚æ¯ä¸ª PO åƒ MVC çš„ Model ä¸€æ ·æ˜ å°„äº†ä¸€å¼ è¡¨ï¼Œå¹¶ä¸”åº”è¯¥å®ç° 2 ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ PO å‘å®ä½“è¿›è¡Œè½¬æ¢ï¼Œä¸€ä¸ªæ˜¯è®©å®ä½“è½¬æ¢æˆæœ¬ POã€‚Repository è¿˜æ˜¯å’Œå…¶å®ƒè§„èŒƒä¸€æ ·ï¼Œä½œä¸ºæŸ¥è¯¢å°è£…ã€‚

Cmd å…¥å‚è§„èŒƒå®šä¹‰ï¼Œå®ç°äº†æ•°æ®æ ¡éªŒä¸ä¾¿æ·çš„ä¼ é€’ã€‚Translator å¯¹è±¡è½¬æ¢ï¼Œç”¨äºå¤æ‚çš„å‡ºå…¥å‚å¤„ç†ã€‚

DTO æ•°æ®ä¼ è¾“å¯¹è±¡ (Data Transfer Object)ï¼Œå°±æ˜¯æ¥å£æœ€ç»ˆè¿”å›å‡ºå»çš„è§„èŒƒã€‚PHP ä¹Ÿä¸€æ ·å¯ä»¥é€šè¿‡ç±»å‹çº¦æŸã€Annotation æ³¨è§£æ¥å®ç°å’Œ Java ä¸€æ ·çš„æ•ˆæœã€‚

æœ€ç»ˆç»“æ„å¦‚ä¸‹ï¼š

```
â”œâ”€â”€ app
â”‚     â”œâ”€â”€ Application åº”ç”¨å±‚
â”‚     â”œâ”€â”€ Domain é¢†åŸŸå±‚
â”‚     â”‚     â””â”€â”€ AnonymousMail é¢†åŸŸåç§°
â”‚     â”‚         â”œâ”€â”€ Exception é¢†åŸŸå¼‚å¸¸
â”‚     â”‚         â”œâ”€â”€ Model é¢†åŸŸæ¨¡å‹
â”‚     â”‚         â”‚     â”œâ”€â”€ Entity é¢†åŸŸå®ä½“
â”‚     â”‚         â”‚     â”‚     â””â”€â”€ Relationship é¢†åŸŸå…³è”å…³ç³»
â”‚     â”‚         â”‚     â”œâ”€â”€ Repository é¢†åŸŸä»“å‚¨æ¥å£
â”‚     â”‚         â”‚     â””â”€â”€ VO é¢†åŸŸå€¼å¯¹è±¡
â”‚     â”‚         â”œâ”€â”€ Setting é¢†åŸŸé…ç½®
â”‚     â”‚         â”œâ”€â”€ Service é¢†åŸŸæœåŠ¡
â”‚     â”‚         â”œâ”€â”€ Factory é¢†åŸŸå·¥å‚
â”‚     â”‚         â””â”€â”€ Enum é¢†åŸŸæšä¸¾
â”‚     â”œâ”€â”€ Infrastructure åŸºç¡€è®¾æ–½å±‚
â”‚     â”‚     â”œâ”€â”€ Bridge å¤–éƒ¨ä¾èµ–æœåŠ¡ï¼ˆRpc/ç¬¬ä¸‰æ–¹æœåŠ¡ï¼‰
â”‚     â”‚     â”‚     â””â”€â”€ Notify æœåŠ¡åç§°
â”‚     â”‚     â”‚         â””â”€â”€ Cmd ä¼ å…¥å‚æ•°
â”‚     â”‚     â”œâ”€â”€ Consoleï¼ˆLaravel Consoleï¼‰
â”‚     â”‚     â”œâ”€â”€ Exceptions åŸºç¡€å¼‚å¸¸ç±»
â”‚     â”‚     â”œâ”€â”€ Persistence æŒä¹…åŒ–å±‚
â”‚     â”‚     â”‚     â”œâ”€â”€ PO æŒä¹…åŒ–å¯¹è±¡
â”‚     â”‚     â”‚     â””â”€â”€ Repository ä»“å‚¨å®ç°
â”‚     â”‚     â”œâ”€â”€ Setting åŸºç¡€é…ç½®
â”‚     â”‚     â””â”€â”€ Providersï¼ˆLaravel æœåŠ¡æä¾›è€…ï¼‰
â”‚     â””â”€â”€ Interfaces æ¥å£å±‚
â”‚         â””â”€â”€ AnonymousMail é¢†åŸŸåç§°
â”‚               â”œâ”€â”€ Cmd ä¼ å…¥å‚æ•°
â”‚               â”œâ”€â”€ Controllers æ¥å£ç±»
â”‚               â”œâ”€â”€ DTO å“åº”å¯¹è±¡
â”‚               â””â”€â”€ Translator ä¼ å…¥/å“åº” å¯¹è±¡è½¬æ¢ç±»
```

ä½œä¸ºç¬¬ä¸€ä¸ªåƒèƒèŸ¹çš„ï¼Œæˆ‘ç”¨è¿™å¥—è®¾è®¡å®Œæˆäº†ä¸€ä¸ªè¿­ä»£çš„æ–°ç³»ç»Ÿã€‚åœ¨å¼€å‘çš„å‰æœŸç”±äºåˆšèµ°å‡ºèˆ’é€‚åŒºï¼Œæ— è®ºæ˜¯è®¾è®¡è¿˜æ˜¯å®ç°ï¼Œéƒ½éœ€è¦èŠ±è´¹ 4 å€äºä¹‹å‰çš„æ—¶é—´ã€‚ç»è¿‡ä¸€ä¸¤ä¸ªé¢†åŸŸä¸­çš„åŸºç¡€æ¥å£å®ç°åï¼Œè¿™ä¸ªå€æ•°å¤§æ¦‚ä¼šé™åˆ° 2ã€‚

> ä»¥è€é¡¹ç›®æ¥å®ç°æ—¶ï¼Œéœ€è¦è€ƒè™‘ä¸¤ä¸ªåº•å±‚åŒæ—¶å­˜åœ¨çš„æƒ…å†µ
> But æˆ‘ä»¬å¤§ä½¬åœ¨å®ç°æ–°çº¦æŸæ—¶å°±æ”¯æŒäº†ä¸¤è€…å¹¶è¡ŒğŸ¤©
